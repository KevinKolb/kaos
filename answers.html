<html>
<head>
<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: #1a1a2e;
  overflow: hidden;
  font-family: "Courier New", Courier, "Lucida Console", monospace;
  display: flex;
  align-items: center;
  justify-content: center;
}

#text-container {
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100vw;
  height: 100vh;
  background: #1a1a2e;
}

#text-container::before {
  content: "";
  position: absolute;
  inset: -20%;
  background: transparent;
  opacity: 0;
  filter: none;
  mix-blend-mode: normal;
  animation: none;
  pointer-events: none;
  z-index: 0;
}

@keyframes waterShimmer {
  0%, 100% { background-position: 0 0; }
  50% { background-position: 100% 100%; }
}

@keyframes caustics {
  0% {
    transform: scale(1) rotate(0deg);
    opacity: 0.45;
  }
  40% {
    transform: scale(1.05) rotate(12deg);
    opacity: 0.6;
  }
  70% {
    transform: scale(0.98) rotate(-8deg);
    opacity: 0.5;
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 0.45;
  }
}

#zoom-text {
  position: absolute;
  z-index: 1;
  color: white;
  font-size: 34vmin;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  text-align: center;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.6);
  width: 90%;
  line-height: 0.6;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.2em;
  opacity: 0;
  text-shadow:
    0 1px 0 rgba(150, 180, 255, 0.4),
    0 -1px 2px rgba(0, 0, 0, 0.6),
    0 3px 3px rgba(0, 0, 0, 0.7),
    0 6px 6px rgba(0, 0, 0, 0.5),
    0 10px 10px rgba(0, 0, 0, 0.3),
    0 0 15px rgba(100, 150, 255, 0.5);
  filter: blur(20px);
  opacity: 0;
  transition: filter 3s ease-out, opacity 3s ease-out, transform 3s ease-out;
}

.word {
  display: block;
  white-space: nowrap;
}

#measure {
  position: absolute;
  left: -9999px;
  top: -9999px;
  visibility: hidden;
  white-space: nowrap;
  font-family: "Courier New", Courier, "Lucida Console", monospace;
  font-weight: bold;
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

@keyframes bounce {
  0% { transform: scale(1) rotate(0deg); }
  30% { transform: scale(1.02) rotate(0.5deg); }
  60% { transform: scale(0.99) rotate(-0.3deg); }
  100% { transform: scale(1) rotate(0deg); }
}

@keyframes float {
  0% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1) rotate(3deg); }
  50% { transform: scale(1) rotate(0deg); }
  75% { transform: scale(1) rotate(-3deg); }
  100% { transform: scale(1) rotate(0deg); }
}

.bubble {
  position: absolute;
  bottom: -20px;
  --drift-start: 0px;
  --drift-end: 0px;
  background:
    radial-gradient(circle at 30% 28%, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.15) 30%, rgba(180, 200, 255, 0.08) 45%, rgba(40, 60, 120, 0.05) 70%, rgba(10, 20, 40, 0) 90%),
    radial-gradient(circle at 70% 75%, rgba(120, 160, 255, 0.25), rgba(20, 30, 80, 0.05) 55%, rgba(10, 20, 40, 0) 85%);
  border-radius: 50%;
  box-shadow:
    inset 0 0 6px rgba(255, 255, 255, 0.35),
    inset 0 0 18px rgba(80, 120, 200, 0.18),
    0 2px 8px rgba(0, 0, 0, 0.35);
  mix-blend-mode: screen;
  filter: saturate(1.2);
  animation: rise linear infinite;
  pointer-events: none;
  z-index: 0;
}

@keyframes rise {
  0% {
    transform: translate(var(--drift-start), 0) scale(1);
    opacity: 0.6;
  }
  50% {
    opacity: 0.4;
  }
  100% {
    transform: translate(var(--drift-end), -100vh) scale(0.55);
    opacity: 0;
  }
}

</style>

</head>

<body>
<div id="text-container">
  <div id="zoom-text"></div>
</div>
<script>
  const texts = [
    "THEY'RE EATING THE DOGS!",
    "SHUT UP PIGGY",
    "COVEFE",
    "BIGLY",
    "MANY PEOPLE ARE SAYING YES",
    "MANY PEOPLE ARE SAYING NO",
    "FAKE NEWS",
    "YEAH YOU RIGHT",
    "SAD!",
    "DRINK BLEACH",
    "EVERYONE AGREES",
    "WITCH HUNT",
    "WE NEVER MET",
    "MORE TARIFFS",
    "SCAM",
    "LOSER",
    "RIGGED",
    "HOAX",
    "WHAT A STUPID QUESTION",
    "FAILING NEW YORK TIMES",
    "A THIRD-RATE REPORTER WHO IS UGLY",
    "RUSSIA, RUSSIA, RUSSIA",
    "DRILL BABY DRILL",
  ];

  const zoomText = document.getElementById("zoom-text");
  const textContainer = document.getElementById("text-container");
  const measure = document.createElement("div");
  measure.id = "measure";
  document.body.appendChild(measure);

  // Create bubbles
  function createBubble() {
    const bubbleCount = Math.random() < 0.35 ? 3 : 1;
    for (let i = 0; i < bubbleCount; i++) {
      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.style.left = Math.random() * 100 + "%";
      const rand = Math.random();
      const size = rand < 0.05
        ? Math.random() * 200 + 250  // 5% chance: huge bubbles (250-450px)
        : rand < 0.2
        ? Math.random() * 150 + 80   // 15% chance: large bubbles (80-230px)
        : Math.random() * 25 + 6;    // 80% chance: small bubbles (6-31px)
      bubble.style.width = bubble.style.height = size + "px";
      bubble.style.zIndex = size > 50 ? -1 : 0;  // Large bubbles behind text
      bubble.style.animationDuration = (Math.random() * 7 + 5) + "s";
      bubble.style.animationDelay = (Math.random() * 1.2) + "s";
      bubble.style.setProperty("--drift-start", (Math.random() * 14 - 7) + "px");
      bubble.style.setProperty("--drift-end", (Math.random() * 20 - 10) + "px");
      textContainer.appendChild(bubble);
      setTimeout(() => bubble.remove(), 14000);
    }
  }
  setInterval(createBubble, 1200);

  let lastText = '';
  function getRandomText() {
    let text;
    do {
      text = texts[Math.floor(Math.random() * texts.length)];
    } while (text === lastText && texts.length > 1);
    lastText = text;
    return text;
  }

  function getAvailableWidth(topPercent) {
    const baseWidth = textContainer.clientWidth || window.innerWidth;
    return baseWidth * 0.9;
  }

  function measureWord(word, size) {
    measure.style.fontSize = size + "vmin";
    measure.textContent = word;
    return measure.getBoundingClientRect().width;
  }

  function getTextStyle(text) {
    const words = text.split(" ");
    const wordCount = words.length;
    const baseSizes = { 1: 50, 2: 34, 3: 28, 4: 22, 5: 18 };
    const topPositions = { 1: "45%", 2: "48%", 3: "50%", 4: "52%", 5: "54%" };
    const baseSize = baseSizes[wordCount] || 9;
    const top = topPositions[wordCount] || "33%";
    const availableWidth = getAvailableWidth(top);

    let size = baseSize;
    let widest = Math.max(...words.map(w => measureWord(w, size)));
    if (widest > availableWidth) {
      const shrinkRatio = availableWidth / widest;
      size = Math.max(4, Math.floor(baseSize * shrinkRatio * 0.94));
      widest = Math.max(...words.map(w => measureWord(w, size)));
      if (widest > availableWidth) {
        size = Math.max(3.5, Math.floor(size * (availableWidth / widest) * 0.96));
      }
    }

    return { size: size + "vmin", top };
  }

  function showText() {
    // Reset animation state
    zoomText.style.transition = "none";
    zoomText.style.filter = "blur(20px)";
    zoomText.style.opacity = "0";
    zoomText.style.transform = "translate(-50%, -50%) scale(0.6) rotate(-8deg)";

    // Set text with dynamic font size and position
    const text = getRandomText();
    const words = text.split(" ");
    zoomText.innerHTML = "";
    const style = getTextStyle(text);
    words.forEach(word => {
      const span = document.createElement("span");
      span.className = "word";
      span.textContent = word;
      zoomText.appendChild(span);
    });
    zoomText.style.fontSize = style.size;
    zoomText.style.top = style.top;

    // Animate in
    zoomText.style.transition = "filter 3s ease-out, opacity 3s ease-out, transform 3s ease-out";
    zoomText.style.filter = "blur(0)";
    zoomText.style.opacity = "1";
    zoomText.style.transform = "translate(-50%, -50%) scale(1) rotate(0deg)";

    // Outro: shrink/fade faster than intro
    setTimeout(() => {
      zoomText.style.transition = "filter 1.5s ease-in, opacity 1.5s ease-in, transform 1.5s ease-in";
      zoomText.style.filter = "blur(18px)";
      zoomText.style.opacity = "0";
      zoomText.style.transform = "translate(-50%, -50%) scale(0.35)";
    }, 8000);

    // Change text after float back
    setTimeout(showText, 9800);
  }

  showText();
</script>
</body>
</html>
